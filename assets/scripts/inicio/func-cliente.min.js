$(function(){$('input[type="radio"].flat-red').iCheck({radioClass:"iradio_square-blue"});$("#correo").emailautocomplete({domains:"gmail.com yahoo.com hotmail.com live.com facebook.com outlook.com".split(" ")});$("#form_c").formValidation({framework:"bootstrap",fields:{}}).on("success.form.fv",function(b){b.preventDefault();$(b.target).data("formValidation");b=$("#ruc").val();var a=$("#dni").val(),c=$("#nombres").val(),d=$("#ape_paterno").val(),e=$("#ape_materno").val(),f=$("#fecha_nac").val(),g=$("#telefono").val(),
h=$("#correo").val(),k=$("#razon_social").val(),l=$("#direccion").val();$.ajax({type:"POST",dataType:"json",data:{ruc:b,dni:a,nombres:c,ape_paterno:d,ape_materno:e,fecha_nac:f,telefono:g,correo:h,razon_social:k,direccion:l},url:"?c=Inicio&a=NuevoCliente",success:function(a){if(1==a.dup)return toastr.warning("Advertencia, Datos duplicados."),!1;$("#mdl-nuevo-cliente").modal("hide");$("#mdl-facturar").modal("show");$("#cliente_id").val(a.cod);$("#nombre_c").val(c+" "+d+" "+e);toastr.success("Datos registrados, correctamente.")}});
return!1})});var nuevoCliente=function(){$("#mdl-nuevo-cliente").modal("show")};$("input:radio[id=td_dni]").on("ifChecked",function(b){$(".block01").css("display","block");$(".block02").css("display","none");$(".block03").css("display","block");$(".block04").css("display","block");$(".block05").css("display","block");$(".block06").css("display","block");$(".block07").css("display","none")});
$("input:radio[id=td_ruc]").on("ifChecked",function(b){$(".block01").css("display","none");$(".block02").css("display","block");$(".block03").css("display","none");$(".block04").css("display","none");$(".block05").css("display","none");$(".block06").css("display","none");$(".block07").css("display","block")});



$("#btnBuscarDni").click(function(event) {
    event.preventDefault();
    var dni = $("#dni").val();
    var url = "busqueda.php";
    $.ajax({                        
        type: "POST",                 
        url: url,                    
        data: "doc1="+ dni ,
        success: function(data)            
        {                        
           porciones = data.split('|'); 
           $("#ape_paterno").val(porciones[0]);
           $("#ape_materno").val(porciones[1]);
           $("#nombres").val(porciones[2]);
           $("#direccion").val('-');
           $('#frm-cliente').formValidation('revalidateField', 'nombres');
           $('#frm-cliente').formValidation('revalidateField', 'ape_paterno');
           $('#frm-cliente').formValidation('revalidateField', 'ape_materno');
           $('#frm-cliente').formValidation('revalidateField', 'direccion');
           if (porciones[0]=='' || porciones[0]=='  '){
              alert("El documento ingresado no existe ");
              document.getElementById("nombre_cliente").value = '';
           }                        
        }
  });
});


$("#btnBuscarRuc").click(function(event) {
    event.preventDefault();
    var ruc = $("#ruc").val();
    var url = "busqueda.php";
    $.ajax({                        
        type: "POST",                 
        url: url,                    
        data: "ruc="+ ruc ,
        success: function(data)            
        {                        
           porciones = data.split('|'); 
           $("#dni").val("");
           $("#ruc").val(ruc);
           $("#razon_social").val(porciones[0]);
           $("#direccion").val(porciones[1]);
           $('#frm-cliente').formValidation('revalidateField', 'razon_social');
           $('#frm-cliente').formValidation('revalidateField', 'direccion');
        }
  });
});


$("#mdl-nuevo-cliente").on("hidden.bs.modal",function(){$("#dni_numero").val("");$("#ruc_numero").val("");$("#td_dni").iCheck("check");$(this).find("#form_c")[0].reset();$("#mdl-facturar").modal("show")});